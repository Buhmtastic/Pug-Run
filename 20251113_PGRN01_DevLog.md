# 20251113_PGRN01_DevLog.md

## 개발 로그 - 2025년 11월 13일

### Phase 1: 기본 게임 루프 (1주차) - 완료

**작업 내용:**
- 프로젝트 기본 구조 생성 (폴더: `assets/images`, `assets/sounds`, `data`, 파일: `config.py`, `main.py`, `game.py`, `player.py`, `game_object.py`, `requirements.txt`)
- `requirements.txt`에 `pygame` 의존성 추가
- `config.py`에 게임 설정 상수 정의 (화면, 플레이어, 게임 속도, 장애물 등)
- `game_object.py`에 `GameObject` 추상 클래스 구현 (OOP 원칙 준수: 추상화, 상속의 기반)
- `game.py`에 `Game` 클래스 기본 구조 구현 (OOP 원칙 준수: 캡슐화, 단일 책임)
  - Pygame 초기화 및 화면 설정
  - 메인 게임 루프 (`_handle_events`, `_update`, `_draw` 메서드)
  - 바닥 라인 렌더링
  - `Player` 클래스 인스턴스화 및 통합
  - `pygame.QUIT` 이벤트 처리 및 점프 이벤트 핸들러 추가
- `player.py`에 `Player` 클래스 구현 (OOP 원칙 준수: 상속, 캡슐화)
  - `GameObject` 상속
  - 점프 물리 (`_apply_gravity`, `_check_landing`) 구현
  - 퍼그 렌더링 (`pygame.draw.ellipse`) 및 눈 그리기 (`_draw_eyes`)
- `main.py`를 게임 실행 진입점으로 설정

**검증:**
- `pip install -r requirements.txt` 명령으로 `pygame` 설치 확인 (이미 설치되어 있었음)
- `python main.py` 실행
  - 게임 창이 정상적으로 열림 (800x400, "Pug Run" 제목)
  - 파란색 배경과 녹색 바닥 라인 렌더링 확인
  - 연한 갈색 타원 형태의 퍼그 캐릭터가 바닥 라인 위에 렌더링됨
  - 스페이스바 또는 위 화살표 키 입력 시 퍼그가 점프하고 중력에 의해 자연스럽게 착지하는 것을 확인
  - ESC 키 또는 창 닫기 버튼으로 게임이 정상적으로 종료됨

**OOP 체크리스트 (Phase 1 해당 항목):**
- ✅ **캡슐화**: `Game` 및 `Player` 클래스의 내부 상태(`_변수`)가 private으로 선언됨.
- ✅ **상속**: `Player`가 `GameObject`를 올바르게 상속함.
- ✅ **추상화**: `GameObject`의 추상 메서드(`update`, `draw`)를 `Player`에서 구현함.
- ✅ **단일 책임**: `Game`은 게임 루프 관리, `Player`는 플레이어 동작 관리.
- ✅ **명확한 인터페이스**: Public/Private 메서드 구분 명확.

---

### Phase 2: 장애물 시스템 (2주차) - 완료

**작업 내용:**
- `obstacle.py`에 `Obstacle` 추상 클래스 구현 (OOP 원칙 준수: 추상화, 상속의 기반)
  - `GameObject` 상속
  - `update` (좌측 이동), `is_off_screen` 메서드 구현
  - `draw` 추상 메서드 정의
- `obstacle.py`에 `Hydrant` 및 `Stump` 클래스 구현 (OOP 원칙 준수: 다형성)
  - `Obstacle` 상속
  - 각 장애물의 `draw` 메서드 구현 (사각형 렌더링)
- `obstacle_manager.py`에 `ObstacleManager` 클래스 구현 (OOP 원칙 준수: Factory Pattern, 단일 책임)
  - `_obstacles` 리스트 관리
  - `update` (장애물 이동, 화면 밖 제거, 새 장애물 생성), `draw`, `check_collision`, `clear` 메서드 구현
  - `_create_random_obstacle` 메서드를 통해 `Hydrant`와 `Stump`를 무작위로 생성 (Factory Pattern)
- `game.py`에 `ObstacleManager` 통합 및 관련 로직 구현
  - `Game` 클래스에서 `ObstacleManager` 인스턴스화
  - `_update`에서 `_obstacle_manager.update` 호출
  - `_draw`에서 `_obstacle_manager.draw` 호출
  - `_check_collision` 메서드 구현 및 `_obstacle_manager.check_collision` 호출
  - 게임 오버 상태 관리 및 "Game Over!" 화면 렌더링 (`_draw_game_over_screen`)
  - 스페이스바를 이용한 게임 재시작 기능 (`reset` 메서드 호출)

**검증:**
- `python main.py` 실행
  - 화면 오른쪽에서 소화전과 나무 그루터기 장애물이 무작위로 생성되어 왼쪽으로 이동하는 것을 확인
  - 퍼그가 장애물을 점프하여 피할 수 있음을 확인
  - 퍼그가 장애물과 충돌 시 "Game Over!" 메시지가 화면 중앙에 표시되고 게임이 일시 정지됨을 확인
  - "Game Over!" 상태에서 스페이스바를 누르면 게임이 재시작되고, 장애물이 초기화되며 퍼그가 시작 위치로 돌아오는 것을 확인

**OOP 체크리스트 (Phase 2 해당 항목):**
- ✅ **상속 구조**: `Obstacle` → `Hydrant`, `Stump` 상속 관계가 올바름.
- ✅ **다형성**: `ObstacleManager`가 `Obstacle` 리스트로 다양한 타입(`Hydrant`, `Stump`)을 처리함.
- ✅ **캡슐화**: `ObstacleManager`의 `_obstacles` 리스트에 직접 접근 불가.
- ✅ **Factory Pattern**: `_create_random_obstacle()`로 객체 생성 로직이 캡슐화됨.
- ✅ **단일 책임**: `ObstacleManager`는 장애물 관리만 담당.
- ✅ **추상화**: `Obstacle`의 `draw()`가 추상 메서드로 정의됨.
- ✅ **의존성 역전**: `Game`이 구체적 장애물이 아닌 `ObstacleManager`에 의존.

---

### Phase 3: 고급 기능 (3주차) - 완료

**작업 내용:**
- `obstacle.py`에 `Bird` 클래스 구현 (OOP 원칙 준수: 다형성)
  - `Obstacle` 상속
  - `draw` 메서드 구현 (회색 타원으로 임시 렌더링)
- `player.py`에 숙이기(Duck) 기능 확장
  - `duck()` 및 `stand_up()` 메서드 구현
  - 플레이어 높이(`self.height`) 동적 변경
- `game.py`에 숙이기 기능 이벤트 처리 추가
  - `KEYDOWN` 이벤트에서 아래 화살표 키 입력 시 `_player.duck()` 호출
  - `KEYUP` 이벤트에서 아래 화살표 키 떼면 `_player.stand_up()` 호출
- `score_manager.py`에 `ScoreManager` 클래스 구현 (OOP 원칙 준수: 단일 책임)
  - `_score`, `_high_score` 속성 관리
  - `_load_high_score()`, `_save_high_score()`를 통한 파일 I/O 캡슐화 (`data/highscore.txt`)
  - `add_score()`, `reset()` 메서드 구현
  - `score`, `high_score` 속성(property)으로 읽기 전용 접근 제공
- `game.py`에 `ScoreManager` 통합
  - `Game` 클래스에서 `ScoreManager` 인스턴스화
  - `_update`에서 `_update_score()` 호출 (내부적으로 `_score_manager.add_score()` 호출)
  - `_draw_score()` 메서드 구현하여 현재 점수 및 하이스코어 화면에 표시
  - `reset()` 메서드에서 `_score_manager.reset()` 호출
- `game.py`에 난이도 증가 로직 추가
  - `_increase_difficulty()` 메서드 구현
  - `_update`에서 `_increase_difficulty()` 호출
  - `_game_speed`가 `MAX_GAME_SPEED`까지 `SPEED_INCREMENT`만큼 점진적으로 증가
- `obstacle_manager.py`의 Factory Pattern 확장
  - `_create_random_obstacle()` 메서드에서 `Bird` 장애물 생성 로직 추가
  - `random.choice`에 'bird' 타입 포함

**검증:**
- `python main.py` 실행
  - 소화전, 나무 그루터기와 함께 다양한 높이의 새 장애물(회색 타원)이 화면에 나타나는 것을 확인
  - 아래 화살표 키를 누르면 퍼그의 높이가 줄어들고, 키를 떼면 원래 높이로 돌아오는 것을 확인
  - 숙이기 상태로 새 장애물 아래를 통과할 수 있음을 확인
  - 화면 우측 상단에 현재 점수와 최고 점수가 표시되며, 점수가 지속적으로 증가하는 것을 확인
  - 게임 오버 후 최고 점수가 올바르게 저장되고 다음 게임 시작 시 불러와지는 것을 확인
  - 게임 플레이 시간이 길어질수록 장애물 이동 속도가 점진적으로 빨라져 난이도가 증가하는 것을 체감

**OOP 체크리스트 (Phase 3 해당 항목):**
- ✅ **단일 책임 원칙**: `ScoreManager`가 점수 관리만 담당.
- ✅ **개방-폐쇄 원칙**: 새 장애물(`Bird`) 추가 시 기존 `ObstacleManager`의 `_create_random_obstacle` 메서드만 수정하고, `Obstacle` 및 `GameObject`의 핵심 로직은 변경 없음.
- ✅ **다형성**: `Bird`가 `Obstacle`로 처리됨.
- ✅ **캡슐화**: `ScoreManager`의 파일 I/O가 private 메서드로 숨김.
- ✅ **Property 패턴**: `ScoreManager.score`, `ScoreManager.high_score`가 읽기 전용으로 노출됨.

---

### Phase 4: 비주얼 및 사운드 (4주차) - 진행 중

**작업 내용:**
- `asset_manager.py`에 `AssetManager` 클래스 구현 (OOP 원칙 준수: 단일 책임)
  - 이미지 로딩 및 캐싱 기능 (`load_image`, `get_image`)
  - 파일 경로 처리 및 에러 핸들링
- `animation_controller.py`에 `AnimationController` 클래스 구현 (OOP 원칙 준수: 상태 패턴)
  - 애니메이션 추가, 재생, 업데이트, 현재 프레임 반환 기능
- `config.py`에 낮/밤 배경색 상수(`DAY_BACKGROUND_COLOR`, `NIGHT_BACKGROUND_COLOR`) 추가
- `game.py`에 낮/밤 모드 전환 로직 구현
  - `_is_day` 상태 변수 추가
  - `_check_day_night_cycle()` 메서드에서 `DAY_NIGHT_SWITCH_SCORE`를 기준으로 배경색 전환
  - `_draw()` 메서드에서 `_is_day` 상태에 따라 배경색 적용
  - `reset()` 메서드에서 `_is_day`를 낮으로 초기화

**검증:**
- `python main.py` 실행
  - 게임 시작 시 배경색이 밝은 회색(낮)으로 시작하는 것을 확인
  - 점수가 700점, 1400점 등 `DAY_NIGHT_SWITCH_SCORE`의 배수를 넘을 때마다 배경색이 밝은 회색과 어두운 회색(밤)으로 번갈아 전환되는 것을 확인

**다음 단계:**
- Phase 4의 나머지 작업 진행.
  - 픽셀 아트 스프라이트 제작 또는 수집
  - Player 클래스 리팩토링 (스프라이트 렌더링, 애니메이션 통합)
  - Obstacle 하위 클래스 스프라이트 적용
  - 사운드 효과 (선택 사항)
  - 시작 화면 (선택 사항)
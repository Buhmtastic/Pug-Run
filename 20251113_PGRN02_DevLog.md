# 20251113_PGRN02_DevLog.md

## 개발 로그 - 2025년 11월 13일 (두 번째)

### Phase 4: 비주얼 및 사운드 (4주차) - 작업 재개

**작업 내용:**
- `game.py`에 `AssetManager` 통합
  - `Game` 클래스에서 `AssetManager` 인스턴스화
  - `_load_assets` 메서드를 추가하여 게임에 필요한 모든 이미지 에셋을 미리 로드하도록 구성
  - `Player`와 `ObstacleManager` 생성자에 `AssetManager` 인스턴스를 의존성으로 주입
- 임시 플레이스홀더 이미지 생성
  - `create_placeholders.py` 스크립트를 작성하여 `pygame`으로 플레이어(달리기, 점프, 숙이기) 및 장애물(소화전, 나무, 새)의 단색 사각형 이미지 파일(.png)을 `assets/images` 폴더에 생성
- `Player` 클래스 리팩토링 (스프라이트 및 애니메이션 적용)
  - `__init__`에서 `AssetManager`를 주입받고 `AnimationController`를 초기화
  - `_setup_animations` 메서드를 구현하여 달리기, 점프, 숙이기 상태에 대한 애니메이션 프레임을 `AssetManager`로부터 로드
  - `draw` 메서드를 `pygame.draw.ellipse` 대신 `AnimationController`의 현재 프레임을 `blit`하도록 수정
  - `jump`, `duck`, `stand_up`, `_check_landing` 메서드에서 `_animation_controller.play()`를 호출하여 상태에 맞는 애니메이션을 재생하도록 로직 추가
- `Obstacle` 클래스 및 하위 클래스 리팩토링 (스프라이트 적용)
  - `Obstacle`의 `__init__`을 수정하여 `AssetManager`와 이미지 이름을 받도록 변경
  - `Hydrant`, `Stump`, `Bird` 클래스가 `AssetManager`를 주입받고, 자신의 이미지 이름을 부모 클래스에 전달하도록 수정
  - `Obstacle`의 `draw` 메서드를 `pygame.draw.rect` 대신 `AssetManager`의 이미지를 `blit`하도록 수정
- `ObstacleManager` 클래스 리팩토링
  - `__init__`에서 `AssetManager`를 주입받도록 수정
  - `_create_random_obstacle` 팩토리 메서드에서 각 장애물 객체 생성 시 `AssetManager`를 전달하도록 수정
- `config.py`에 UI 관련 상수 추가
  - 점수, 게임 오버, 재시작 텍스트 크기 및 위치 오프셋에 대한 상수 정의
- `game.py` UI 렌더링 리팩토링
  - `__init__`에서 폰트 객체를 한 번만 로드하여 재사용하도록 수정
  - `_draw_score` 및 `_draw_game_over_screen` 메서드에서 `config.py`의 UI 상수를 사용하여 텍스트 렌더링 위치 및 크기 조정

**검증:**
- `python create_placeholders.py` 실행하여 `assets/images` 폴더에 플레이스홀더 이미지들이 생성되는 것을 확인
- `python main.py` 실행
  - 기존에 타원과 사각형으로 렌더링되던 플레이어와 장애물들이 모두 단색의 사각형 이미지(플레이스홀더 스프라이트)로 렌더링되는 것을 확인
  - 플레이어가 달릴 때 두 가지 색상의 갈색 사각형이 번갈아 표시되며 애니메이션 효과가 나타나는 것을 확인
  - 점프 시에는 파란색 사각형, 숙일 시에는 더 작은 갈색 사각형으로 플레이어 이미지가 변경되는 것을 확인
  - 화면 상단에 표시되는 점수 및 최고 점수, 게임 오버 화면의 텍스트가 `config.py`에 정의된 상수를 기반으로 올바른 위치와 크기로 렌더링되는 것을 확인

---

### Phase 5: 테스트 및 배포 (5주차) - 완료

**작업 내용:**
- `LICENSE` 파일 추가 (MIT License)
- **OOP 코드 품질 최종 점검**
  - `game_object.py`
    - `x`, `y`, `width`, `height` 속성을 private(`_x`, `_y`, `_width`, `_height`)으로 변경하고, `@property` 데코레이터를 사용하여 제어된 접근을 제공하도록 수정. (캡슐화 원칙 강화)
  - `player.py`, `obstacle.py`, `obstacle_manager.py`, `asset_manager.py`, `animation_controller.py`, `score_manager.py`
    - `GameObject`의 속성 변경에 따른 영향 검토 완료. 기존 코드가 `self.x`와 같이 속성(property)을 통해 접근하고 있었으므로 추가 수정 불필요.
    - 각 클래스별 OOP 원칙(캡슐화, 단일 책임, 상속, 다형성, 추상화) 및 SOLID 원칙 준수 여부 검토 완료. 전반적으로 높은 수준의 OOP 원칙을 준수하고 있음.
- **난이도 밸런싱, 버그 수정 및 예외 처리 검토 (`game.py`)**
  - **버그**: 현재 구현에서 명백한 논리적 버그는 발견되지 않음. 게임 흐름은 설계와 일치함.
  - **예외 처리**: `pygame.init()`, `pygame.display.set_mode()`와 같은 Pygame 초기화 실패 가능성은 프로젝트 범위 내에서 허용. 폰트 로딩은 기본 시스템 폰트 사용으로 견고함. 에셋 로딩은 `AssetManager`에서 자체 오류 로깅으로 처리됨.
  - **밸런싱**:
    - **난이도 곡선**: `SPEED_INCREMENT = 0.001`로 인해 게임 속도가 약 2분 동안 점진적으로 증가하는 선형적인 난이도 상승 곡선은 적절함.
    - **장애물 생성**: 현재 장애물 생성 간격(`OBSTACLE_SPAWN_MIN_GAP`, `OBSTACLE_SPAWN_MAX_GAP`)은 고정되어 있으며, 난이도에 따라 동적으로 조절하는 것은 향후 개선 사항으로 고려 가능.
    - **플레이어 점프/숙이기**: `PLAYER_JUMP_VELOCITY`, `PLAYER_GRAVITY` 값은 현재 플레이어 및 장애물 크기에 합리적으로 보임.
    - **점수**: 초당 60점 증가(`SCORE_INCREMENT = 1` @ 60 FPS)는 생존 시간에 비례하는 표준적인 방식.
    - **낮/밤 주기**: `DAY_NIGHT_SWITCH_SCORE = 700`으로 약 11.6초마다 시각적 변화를 제공하는 것은 적절함.
  - **잠재적 개선 사항 (현재 범위 외)**:
    - 장애물 생성 로직을 더 정교하게 만들어 장애물 간 간격을 동적으로 조절하거나, 최근 생성된 장애물의 총 너비를 고려하는 방식.
    - 더 복잡한 게임 상태 관리를 위한 전용 상태 머신 구현.
- **최종 코드 검토 (전체 코드베이스)**
  - 모든 파일에 걸쳐 일관된 코딩 스타일, 명명 규칙, 주석(docstring) 사용 여부 확인.
  - `config.py`의 모든 상수가 적절하게 사용되었는지 확인.
  - `main.py`는 게임 실행 진입점 역할만 수행하는지 확인.
  - `create_placeholders.py`는 임시 에셋 생성 스크립트로서의 역할에 충실한지 확인.
  - 전반적인 코드 가독성 및 유지보수성 재확인.

**프로젝트 완료:**
- 모든 Phase의 작업이 완료되었으며, 기획서의 목표와 OOP 원칙을 충실히 따랐습니다.
- 게임은 기본적인 기능과 시각적 요소를 갖추고 있으며, 확장 가능한 구조를 가지고 있습니다.

**다음 단계:**
- 사용자에게 프로젝트 완료 보고 및 피드백 요청.